# Circling - проблема циклической зависимости

Задача возникла при просмотре видео 
[Евгений Борисов — Spring – Глубоко и не очень](https://youtu.be/nGfeSo52_8A). Данный проект - это
некий playground для того, чтобы руками пощупать, что, как и где может или не может использоваться. 

## "Голый" Spring
При использовании @Autowired циклических зависимостей внутри сервисов проблем в принципе можно 
успешно избегать, если не использовать DI таких зависимых сервисов через constructor injection. 

Необходимые инициализации можно производить как в конструкторах, так и в методах
с аннотацией @PostConstruct. Следует иметь ввиду, что хоть на порядок прохождения бинов через 
post-construct можно влиять аннотацией @DependsOn, всё таки доступ к полностью проинициализированным 
классам (с учётом логики в post-construct) будет иметь только последний инициализируемый бин.

Это решается использованием @EventListener на ContextRefreshedEvent, когда все бины уже созданы.
Однако при попытке подключить к такому проекту @EnableAsync и использовать асинхронные методы 
бизнесс-логики циклически зависимых сервисов приложение упадает. Упадёт скорее всего на post-construct'е
последнего сервиса.

## Циклические зависимости на Spring Integration

Чтобы заставить приложение заработать, необходимо реализовать DI в циклически зависимые сущности
самостоятельно. Для этого создан бин Family, осуществляющий инжекцию в тот момент времени, когда 
произошёл ContextRefreshedEvent. Успешный старт с использованием Integration и @Autowired 
на циклических зависимостях так и не был получен.