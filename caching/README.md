# caching

Проверка и обкатка различных вариантов кеширования в Spring на примере предметной области "покупатель-магазин". 
Покупатель периодически делает запрос на ассортимент магазина, формирует корзину товаров и отправляет заказ. 

## Stage  1. Имплементация DI с помощью Spring

Подготовительный вариант не использует кэширование и базу данных. Описание Бинов:
* Ассортимент представлен Бином `Stock`, который создаёт и хранит список Товаров (`Product`),
иммитируя длительность работы случайными задержками
* Магазин представлен Бином `Shop`, который использует Ассортимент для запросов Покупателей
* Покупатель представлен Бином `Buyer`, который будучи запущен (старт) в отдельном потоке 
периодически создает полезную нагрузку в виде заказа
* "Набор Покупателей" (Бин `BuyersSet`) создаёт Покупателей, запускает/останавливает их в ходе 
жизненного цикла приложения, а так же запрашивает и логгирует статистику по профилированию
 
## Stage 2. Ассортимент хранится в БД

Добавлена абстракция Заказ (`Order`), а так же база данных h2 для хранения Товаров и Заказов. Немного исправлен `Stock`.
Теперь он:
* не ответственен за первичное создание Товаров (БД инициализируется тестовым набором данных скриптом `init_db.sql`)
* запрашивает ассортимент Товаров и сохраняет Заказы в БД

Товар получил дополнительный атрибут "цена", а Магазин периодически логгирует статистику по обработанным Заказам.
И последнее, немного откорректирована схема инжекции в конфигурации в связи с изменениями в зонах ответственности бинов,
а так же добавлением новой абстракции Заказ.

## Stage 3. Кеширование ассортимента

Добавлена библиотека `caffeine` для кэширования. Возвращаемое значение метода `Stock.findAll()` теперь кэшируется,
что уменьшает время работы первой фазы Пользовательской нагрузки на порядки.